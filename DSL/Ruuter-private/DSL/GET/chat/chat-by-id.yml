extractRequestData:
  assign:
    chatId: ${incoming.params.chatId}
  next: getChatById

getChatById:
  call: http.post
  args:
    url: "[#CHATBOT_RESQL]:[#CHATBOT_RESQL_PORT]/get-chat-by-id"
    body:
      id: ${chatId}
  result: chatResult
  next: formatChatArray

formatChatArray:
  call: http.post
  args:
    url: "[#CHATBOT_DMAPPER]:[#CHATBOT_DMAPPER_PORT]/json/v2/return_first_chat_from_array"
    body:
      chatArray: ${chatResult.response.body}
  result: formattedChat
  next: returnChat

returnChat:
   return: ${formattedChat.response.body}  
   next: end
